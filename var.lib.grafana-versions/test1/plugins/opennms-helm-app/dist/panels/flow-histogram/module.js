define(["lodash","jquery","app/plugins/sdk","angular","@grafana/ui","@grafana/data","moment","jquery.flot","jquery.flot.selection","jquery.flot.crosshair","jquery.flot.time","jquery.flot.stack"],(function(t,e,i,n,o,r,s,l,a,c,h,u){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=69)}([function(e,i){e.exports=t},,function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,i){var n=i(11),o=i(5);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e,i){var n=i(15);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?t.exports=n=function(t){return i(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)},n(e)}t.exports=n},,function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},,,function(t,e){t.exports=s},,,,,,,,,,,,,,,function(t,e){t.exports=l},function(t,e){t.exports=a},function(t,e){t.exports=c},function(t,e){!function(t){function e(t,e,i,n){var o="categories"==e.xaxis.options.mode,r="categories"==e.yaxis.options.mode;if(o||r){var s=n.format;if(!s){var l=e;if((s=[]).push({x:!0,number:!0,required:!0}),s.push({y:!0,number:!0,required:!0}),l.bars.show||l.lines.show&&l.lines.fill){var a=!!(l.bars.show&&l.bars.zero||l.lines.show&&l.lines.zero);s.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:a}),l.bars.horizontal&&(delete s[s.length-1].y,s[s.length-1].x=!0)}n.format=s}for(var c=0;c<s.length;++c)s[c].x&&o&&(s[c].number=!1),s[c].y&&r&&(s[c].number=!1)}}function i(t){var e=[];for(var i in t.categories){var n=t.categories[i];n>=t.min&&n<=t.max&&e.push([n,i])}return e.sort((function(t,e){return t[0]-e[0]})),e}function n(e,n,o){if("categories"==e[n].options.mode){if(!e[n].categories){var r={},s=e[n].options.categories||{};if(t.isArray(s))for(var l=0;l<s.length;++l)r[s[l]]=l;else for(var a in s)r[a]=s[a];e[n].categories=r}e[n].options.ticks||(e[n].options.ticks=i),function(t,e,i){for(var n=t.points,o=t.pointsize,r=t.format,s=e.charAt(0),l=function(t){var e=-1;for(var i in t)t[i]>e&&(e=t[i]);return e+1}(i),a=0;a<n.length;a+=o)if(null!=n[a])for(var c=0;c<o;++c){var h=n[a+c];null!=h&&r[c][s]&&(h in i||(i[h]=l,++l),n[a+c]=i[h])}}(o,n,e[n].categories)}}function o(t,e,i){n(e,"xaxis",i),n(e,"yaxis",i)}t.plot.plugins.push({init:function(t){t.hooks.processRawData.push(e),t.hooks.processDatapoints.push(o)},options:{xaxis:{categories:null},yaxis:{categories:null}},name:"categories",version:"1.0"})}(jQuery)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){i(13),i(14),i(10),t.exports=i(78)},function(t,e){t.exports=h},function(t,e){t.exports=u},function(t,e){!function(t){function e(){return!!document.createElement("canvas").getContext&&"function"==typeof document.createElement("canvas").getContext("2d").fillText}function i(){var t=document.createElement("div");return void 0!==t.style.MozTransition||void 0!==t.style.OTransition||void 0!==t.style.webkitTransition||void 0!==t.style.transition}function n(t,e,i,n,o){this.axisName=t,this.position=e,this.padding=i,this.plot=n,this.opts=o,this.width=0,this.height=0}function o(t,e,i,o,r){n.prototype.constructor.call(this,t,e,i,o,r)}function r(t,e,i,o,r){n.prototype.constructor.call(this,t,e,i,o,r),this.elem=null}function s(t,e,i,n,o){r.prototype.constructor.call(this,t,e,i,n,o)}function l(t,e,i,n,o){s.prototype.constructor.call(this,t,e,i,n,o),this.requiresResize=!1}n.prototype.cleanup=function(){},o.prototype=new n,o.prototype.constructor=o,o.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},o.prototype.draw=function(t){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var e=this.plot.getCanvas().getContext("2d");e.save(),e.textAlign="left",e.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,e.fillStyle=this.opts.axisLabelColour;var i,n,o=e.measureText(this.opts.axisLabel).width,r=this.opts.axisLabelFontSizePixels,s=0;"top"==this.position?(i=t.left+t.width/2-o/2,n=t.top+.72*r):"bottom"==this.position?(i=t.left+t.width/2-o/2,n=t.top+t.height-.72*r):"left"==this.position?(i=t.left+.72*r,n=t.height/2+t.top+o/2,s=-Math.PI/2):"right"==this.position&&(i=t.left+t.width-.72*r,n=t.height/2+t.top-o/2,s=Math.PI/2),e.translate(i,n),e.rotate(s),e.fillText(this.opts.axisLabel,0,0),e.restore()},r.prototype=new n,r.prototype.constructor=r,r.prototype.calculateSize=function(){var e=t('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(e),this.labelWidth=e.outerWidth(!0),this.labelHeight=e.outerHeight(!0),e.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},r.prototype.cleanup=function(){this.elem&&this.elem.remove()},r.prototype.draw=function(e){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=t('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px"),this.elem.css("top",e.top+"px")):"bottom"==this.position?(this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px"),this.elem.css("top",e.top+e.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px"),this.elem.css("left",e.left+"px")):"right"==this.position&&(this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px"),this.elem.css("left",e.left+e.width-this.labelWidth+"px"))},s.prototype=new r,s.prototype.constructor=s,s.prototype.calculateSize=function(){r.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},s.prototype.transforms=function(t,e,i){var n={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=e||0!=i){var o=" translate("+e+"px, "+i+"px)";n["-moz-transform"]+=o,n["-webkit-transform"]+=o,n["-o-transform"]+=o,n["-ms-transform"]+=o}if(0!=t){var r=" rotate("+t+"deg)";n["-moz-transform"]+=r,n["-webkit-transform"]+=r,n["-o-transform"]+=r,n["-ms-transform"]+=r}var s="top: 0; left: 0; ";for(var l in n)n[l]&&(s+=l+":"+n[l]+";");return s+=";"},s.prototype.calculateOffsets=function(t){var e={x:0,y:0,degrees:0};return"bottom"==this.position?(e.x=t.left+t.width/2-this.labelWidth/2,e.y=t.top+t.height-this.labelHeight):"top"==this.position?(e.x=t.left+t.width/2-this.labelWidth/2,e.y=t.top):"left"==this.position?(e.degrees=-90,e.x=t.left-this.labelWidth/2+this.labelHeight/2,e.y=t.height/2+t.top):"right"==this.position&&(e.degrees=90,e.x=t.left+t.width-this.labelWidth/2-this.labelHeight/2,e.y=t.height/2+t.top),e.x=Math.round(e.x),e.y=Math.round(e.y),e},s.prototype.draw=function(e){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var i=this.calculateOffsets(e);this.elem=t('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(i.degrees,i.x,i.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},l.prototype=new s,l.prototype.constructor=l,l.prototype.transforms=function(t,e,i){var n="";if(0!=t){for(var o=t/90;o<0;)o+=4;n+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+o+"); ",this.requiresResize="right"==this.position}return 0!=e&&(n+="left: "+e+"px; "),0!=i&&(n+="top: "+i+"px; "),n},l.prototype.calculateOffsets=function(t){var e=s.prototype.calculateOffsets.call(this,t);return"top"==this.position?e.y=t.top+1:"left"==this.position?(e.x=t.left,e.y=t.height/2+t.top-this.labelWidth/2):"right"==this.position&&(e.x=t.left+t.width-this.labelHeight,e.y=t.height/2+t.top-this.labelWidth/2),e},l.prototype.draw=function(t){s.prototype.draw.call(this,t),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},t.plot.plugins.push({init:function(n){n.hooks.processOptions.push((function(n,a){if(a.axisLabels.show){var c=!1,h={};n.hooks.draw.push((function(n,a){var u=!1;c?(c=!1,t.each(n.getAxes(),(function(t,e){var i=e.options||n.getOptions()[t];i&&i.axisLabel&&e.show&&h[t].draw(e.box)}))):(t.each(n.getAxes(),(function(t,a){var c=a.options||n.getOptions()[t];if(t in h&&(a.labelHeight=a.labelHeight-h[t].height,a.labelWidth=a.labelWidth-h[t].width,c.labelHeight=a.labelHeight,c.labelWidth=a.labelWidth,h[t].cleanup(),delete h[t]),c&&c.axisLabel&&a.show){u=!0;var p=null;if(c.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)p=c.axisLabelUseHtml||!i()&&!e()&&!c.axisLabelUseCanvas?r:c.axisLabelUseCanvas||!i()?o:s;else{var d=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(d)&&(rv=parseFloat(RegExp.$1)),p=rv>=9&&!c.axisLabelUseCanvas&&!c.axisLabelUseHtml?s:c.axisLabelUseCanvas||c.axisLabelUseHtml?c.axisLabelUseCanvas?o:r:l}var f=void 0===c.axisLabelPadding?2:c.axisLabelPadding;h[t]=new p(t,a.position,f,n,c),h[t].calculateSize(),c.labelHeight=a.labelHeight+h[t].height,c.labelWidth=a.labelWidth+h[t].width}})),u&&(c=!0,n.setupGrid(),n.draw()))}))}}))},options:{axisLabels:{show:!0}},name:"axisLabels",version:"2.0"})}(jQuery)},,,,,,function(t,e,i){"use strict";i.r(e);var n=i(2),o=i.n(n),r=i(3),s=i.n(r),l=i(6),a=i.n(l),c=i(4),h=i.n(c),u=i(5),p=i.n(u),d=i(7),f=i.n(d),g=i(9),b=i(0),v=i.n(b),m=i(8),y=i.n(m),w=i(18),x=i.n(w),L=(i(33),i(70),i(34),i(35),i(71),i(72),i(36),i(10)),S=i.n(L);
/*!
 * perfect-scrollbar v1.4.0
 * (c) 2018 Hyunje Jun
 * @license MIT
 */
function W(t){return getComputedStyle(t)}function Y(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}return t}function k(t){var e=document.createElement("div");return e.className=t,e}var X="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function R(t,e){if(!X)throw new Error("No element matching method supported");return X.call(t,e)}function T(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function H(t,e){return Array.prototype.filter.call(t.children,(function(t){return R(t,e)}))}var E={main:"ps",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},O={x:null,y:null};function C(t,e){var i=t.element.classList,n=E.state.scrolling(e);i.contains(n)?clearTimeout(O[e]):i.add(n)}function M(t,e){O[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(E.state.scrolling(e))}),t.settings.scrollingThreshold)}var P=function(t){this.element=t,this.handlers={}},D={isEmpty:{configurable:!0}};P.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},P.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter((function(n){return!(!e||n===e)||(i.element.removeEventListener(t,n,!1),!1)}))},P.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},D.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(P.prototype,D);var A=function(){this.eventElements=[]};function B(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}A.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new P(t),this.eventElements.push(e)),e},A.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},A.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},A.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},A.prototype.once=function(t,e,i){var n=this.eventElement(t),o=function(t){n.unbind(e,o),i(t)};n.bind(e,o)};var j=function(t,e,i,n,o){var r;if(void 0===n&&(n=!0),void 0===o&&(o=!1),"top"===e)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,i,n,o){var r=i[0],s=i[1],l=i[2],a=i[3],c=i[4],h=i[5];void 0===n&&(n=!0);void 0===o&&(o=!1);var u=t.element;t.reach[a]=null,u[l]<1&&(t.reach[a]="start");u[l]>t[r]-t[s]-1&&(t.reach[a]="end");e&&(u.dispatchEvent(B("ps-scroll-"+a)),e<0?u.dispatchEvent(B("ps-scroll-"+c)):e>0&&u.dispatchEvent(B("ps-scroll-"+h)),n&&function(t,e){C(t,e),M(t,e)}(t,a));t.reach[a]&&(e||o)&&u.dispatchEvent(B("ps-"+a+"-reach-"+t.reach[a]))}(t,i,r,n,o)};function I(t){return parseInt(t,10)||0}var z={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},_=function(t){var e=t.element,i=Math.floor(e.scrollTop);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(H(e,E.element.rail("x")).forEach((function(t){return T(t)})),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(H(e,E.element.rail("y")).forEach((function(t){return T(t)})),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=N(t,I(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=I((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=N(t,I(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=I(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var i={width:e.railXWidth},n=Math.floor(t.scrollTop);e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:i.left=t.scrollLeft;e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-n:i.top=e.scrollbarXTop+n;Y(e.scrollbarXRail,i);var o={top:n,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?o.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:o.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?o.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:o.left=e.scrollbarYLeft+t.scrollLeft;Y(e.scrollbarYRail,o),Y(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),Y(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(E.state.active("x")):(e.classList.remove(E.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(E.state.active("y")):(e.classList.remove(E.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)};function N(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function F(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],l=e[5],a=e[6],c=e[7],h=e[8],u=t.element,p=null,d=null,f=null;function g(e){u[a]=p+f*(e[o]-d),C(t,c),_(t),e.stopPropagation(),e.preventDefault()}function b(){M(t,c),t[h].classList.remove(E.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",g)}t.event.bind(t[s],"mousedown",(function(e){p=u[a],d=e[o],f=(t[n]-t[i])/(t[r]-t[l]),t.event.bind(t.ownerDocument,"mousemove",g),t.event.once(t.ownerDocument,"mouseup",b),t[h].classList.add(E.state.clicking),e.stopPropagation(),e.preventDefault()}))}var U={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top>t.scrollbarYTop?1:-1;t.element.scrollTop+=i*t.containerHeight,_(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=i*t.containerWidth,_(t),e.stopPropagation()}))},"drag-thumb":function(t){F(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),F(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var e=t.element;t.event.bind(t.ownerDocument,"keydown",(function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&(R(e,":hover")||R(t.scrollbarX,":focus")||R(t.scrollbarY,":focus"))){var n,o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if("IFRAME"===o.tagName)o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(R(n=o,"input,[contenteditable]")||R(n,"select,[contenteditable]")||R(n,"textarea,[contenteditable]")||R(n,"button,[contenteditable]"))return}var r=0,s=0;switch(i.which){case 37:r=i.metaKey?-t.contentWidth:i.altKey?-t.containerWidth:-30;break;case 38:s=i.metaKey?t.contentHeight:i.altKey?t.containerHeight:30;break;case 39:r=i.metaKey?t.contentWidth:i.altKey?t.containerWidth:30;break;case 40:s=i.metaKey?-t.contentHeight:i.altKey?-t.containerHeight:-30;break;case 32:s=i.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:s=t.containerHeight;break;case 34:s=-t.containerHeight;break;case 36:s=t.contentHeight;break;case 35:s=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==r||t.settings.suppressScrollY&&0!==s||(e.scrollTop-=s,e.scrollLeft+=r,_(t),function(i,n){var o=Math.floor(e.scrollTop);if(0===i){if(!t.scrollbarYActive)return!1;if(0===o&&n>0||o>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var r=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===r&&i<0||r>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}(r,s)&&i.preventDefault())}}))},wheel:function(t){var e=t.element;function i(i){var n=function(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!=e&&i!=i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}(i),o=n[0],r=n[1];if(!function(t,i,n){if(!z.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(t))return!1;for(var o=t;o&&o!==e;){if(o.classList.contains(E.element.consuming))return!0;var r=W(o);if([r.overflow,r.overflowX,r.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&n>0||o.scrollTop===s&&n<0))return!0;var l=o.scrollWidth-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&i<0||o.scrollLeft===l&&i>0))return!0}o=o.parentNode}return!1}(i.target,o,r)){var s=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(r?e.scrollTop-=r*t.settings.wheelSpeed:e.scrollTop+=o*t.settings.wheelSpeed,s=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o?e.scrollLeft+=o*t.settings.wheelSpeed:e.scrollLeft-=r*t.settings.wheelSpeed,s=!0):(e.scrollTop-=r*t.settings.wheelSpeed,e.scrollLeft+=o*t.settings.wheelSpeed),_(t),(s=s||function(i,n){var o=Math.floor(e.scrollTop),r=0===e.scrollTop,s=o+e.offsetHeight===e.scrollHeight,l=0===e.scrollLeft,a=e.scrollLeft+e.offsetWidth===e.scrollWidth;return!(Math.abs(n)>Math.abs(i)?r||s:l||a)||!t.settings.wheelPropagation}(o,r))&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}void 0!==window.onwheel?t.event.bind(e,"wheel",i):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",i)},touch:function(t){if(z.supportsTouch||z.supportsIePointer){var e=t.element,i={},n=0,o={},r=null;z.supportsTouch?(t.event.bind(e,"touchstart",c),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",u)):z.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",c),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",u)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",c),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",u)))}function s(i,n){e.scrollTop-=n,e.scrollLeft-=i,_(t)}function l(t){return t.targetTouches?t.targetTouches[0]:t}function a(t){return(!t.pointerType||"pen"!==t.pointerType||0!==t.buttons)&&(!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function c(t){if(a(t)){var e=l(t);i.pageX=e.pageX,i.pageY=e.pageY,n=(new Date).getTime(),null!==r&&clearInterval(r)}}function h(r){if(a(r)){var c=l(r),h={pageX:c.pageX,pageY:c.pageY},u=h.pageX-i.pageX,p=h.pageY-i.pageY;if(function(t,i,n){if(!e.contains(t))return!1;for(var o=t;o&&o!==e;){if(o.classList.contains(E.element.consuming))return!0;var r=W(o);if([r.overflow,r.overflowX,r.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&n>0||o.scrollTop===s&&n<0))return!0;var l=o.scrollLeft-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&i<0||o.scrollLeft===l&&i>0))return!0}o=o.parentNode}return!1}(r.target,u,p))return;s(u,p),i=h;var d=(new Date).getTime(),f=d-n;f>0&&(o.x=u/f,o.y=p/f,n=d),function(i,n){var o=Math.floor(e.scrollTop),r=e.scrollLeft,s=Math.abs(i),l=Math.abs(n);if(l>s){if(n<0&&o===t.contentHeight-t.containerHeight||n>0&&0===o)return 0===window.scrollY&&n>0&&z.isChrome}else if(s>l&&(i<0&&r===t.contentWidth-t.containerWidth||i>0&&0===r))return!0;return!0}(u,p)&&r.preventDefault()}}function u(){t.settings.swipeEasing&&(clearInterval(r),r=setInterval((function(){t.isInitialized?clearInterval(r):o.x||o.y?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?clearInterval(r):(s(30*o.x,30*o.y),o.x*=.8,o.y*=.8):clearInterval(r)}),10))}}},K=function(t,e){var i=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var n in this.element=t,t.classList.add(E.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},e)i.settings[n]=e[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o,r,s=function(){return t.classList.add(E.state.focus)},l=function(){return t.classList.remove(E.state.focus)};this.isRtl="rtl"===W(t).direction,this.isNegativeScroll=(r=t.scrollLeft,t.scrollLeft=-1,o=t.scrollLeft<0,t.scrollLeft=r,o),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new A,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=k(E.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=k(E.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",l),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=W(this.scrollbarXRail);this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=I(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=I(a.borderLeftWidth)+I(a.borderRightWidth),Y(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=I(a.marginLeft)+I(a.marginRight),Y(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=k(E.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=k(E.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",l),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c=W(this.scrollbarYRail);this.scrollbarYRight=parseInt(c.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=I(c.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=W(t);return I(e.width)+I(e.paddingLeft)+I(e.paddingRight)+I(e.borderLeftWidth)+I(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=I(c.borderTopWidth)+I(c.borderBottomWidth),Y(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=I(c.marginTop)+I(c.marginBottom),Y(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return U[t](i)})),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return i.onScroll(t)})),_(this)};K.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,Y(this.scrollbarXRail,{display:"block"}),Y(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=I(W(this.scrollbarXRail).marginLeft)+I(W(this.scrollbarXRail).marginRight),this.railYMarginHeight=I(W(this.scrollbarYRail).marginTop)+I(W(this.scrollbarYRail).marginBottom),Y(this.scrollbarXRail,{display:"none"}),Y(this.scrollbarYRail,{display:"none"}),_(this),j(this,"top",0,!1,!0),j(this,"left",0,!1,!0),Y(this.scrollbarXRail,{display:""}),Y(this.scrollbarYRail,{display:""}))},K.prototype.onScroll=function(t){this.isAlive&&(_(this),j(this,"top",this.element.scrollTop-this.lastScrollTop),j(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},K.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),T(this.scrollbarX),T(this.scrollbarY),T(this.scrollbarXRail),T(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},K.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")};var q=K;S.a.module("grafana.directives").directive("flowLegend",["popoverSrv","$timeout",function(t,e){return{link:function(i,n){var o,r,s,l=y()('<div class="flow-legend__container"></div>'),a=!0,c=i.ctrl,h=c.panel;function u(t){return t.parents("[data-series-index]").data("series-index")}function p(t){var e=u(y()(t.currentTarget)),i=y()(l.children("tbody")).scrollTop();c.toggleSeries(e),y()(l.children("tbody")).scrollTop(i)}function d(i){if(!y()(i.target).parents(".popover").length){var n=y()(i.currentTarget).find(".fa-minus"),o=u(n);e((function(){t.show({element:n[0],position:"right center",template:'<series-color-picker-popover series="series" onToggleAxis="toggleAxis" onColorChange="colorSelected"></series-color-picker-popover>',openOn:"hover",classNames:"drop-popover drop-popover--transparent",model:{autoClose:!0,colorSelected:function(t){c.changeSeriesColor(o,t)}}})}))}}i.$on("$destroy",(function(){s&&s.destroy()})),c.events.on("render",(function(){(o=c.legendData)&&function(){if(!h.legend.show)return l.empty(),void n.find(".flow-legend").css("padding-top",0);n.find(".flow-legend").css("padding-top",6);a&&(n.append(l),l.on("click",".flow-legend-icon",d),l.on("click",".flow-legend-alias",p),a=!1);l.empty();var t="Right side"===h.legendType&&h.legend.sideWidth?h.legend.sideWidth+"px":"",e="Right side"===h.legendType&&h.legend.sideWidth?h.legend.sideWidth-1+"px":"";n.css("min-width",t),n.css("width",e),l.toggleClass("flow-legend-table",!1);var i=[];for(r=0;r<o.length;r++){var u=o[r],f='<div class="flow-legend-series';c.hiddenSeries[r]&&(f+=" flow-legend-series-hidden"),f+='" data-series-index="'+r+'">',f+='<span class="flow-legend-icon" style="float:none;">',f+='<i class="fa fa-minus pointer" style="color:'+u.color+'"></i>',f+="</span>",f+='<a class="flow-legend-alias" style="float:none;">'+v.a.escape(u.label)+"</a>",f+="</div>",i.push(y()(f))}l.append(i),"Under graph"===h.legendType||"Right side"===h.legendType?s?s.update():s=new q(n[0],{scrollYMarginOffset:2,suppressScrollX:!0}):s&&(s.destroy(),s=null)}()}))}}}]);var $=function(t){function e(t,i,n,r){var s;o()(this,e),(s=a()(this,h()(e).call(this,t,i))).$rootScope=r,s.scope=t,s.$timeout=n;var l=v.a.findIndex(y.a.plot.plugins,(function(t){return"categories"===t.name})),c=v.a.findIndex(y.a.plot.plugins,(function(t){return"stack"===t.name}));if(l>=0&&c>=0&&l>c){var u=y.a.plot.plugins[c];y.a.plot.plugins[c]=y.a.plot.plugins[l],y.a.plot.plugins[l]=u}return v.a.defaults(s.panel,{direction:"horizontal",units:"b",display:"total",mode:"separate",legend:{show:!0,sideWidth:120,bottomHeight:42},legendType:"Under graph",aliasColors:[]}),s._renderRetries=0,s.typeChanged=!1,s.hiddenSeries={},s.retryTimes=10,s.retryDelay=100,s.events.on("init-edit-mode",s.onInitEditMode.bind(p()(s))),s.events.on("data-received",s.onDataReceived.bind(p()(s))),s.events.on("data-error",s.onDataError.bind(p()(s))),s.events.on("data-snapshot-load",s.onDataReceived.bind(p()(s))),s.events.on("render",s.onRender.bind(p()(s))),s.setLegendWidthForLegacyBrowser(),s}return e.$inject=["$scope","$injector","$timeout","$rootScope"],f()(e,t),s()(e,[{key:"link",value:function(t,e,i,n){this.elem=e.find(".flow-panel__chart"),this.ctrl=n}},{key:"onInitEditMode",value:function(){this.addEditorTab("Grouping","public/plugins/opennms-helm-app/panels/flow-histogram/editor.html",2)}},{key:"onDataReceived",value:function(t){if(t.length>0){var i=e.getUnits(t,this.panel.units);this.units=i.units;var n=this.getLabeledValues(t);this.series=this.getSeries(n,i.divisor),this.setData()}this.render()}},{key:"onDataError",value:function(){this.series=[],this.render()}},{key:"onRender",value:function(){var t=this;this.elem.empty();var e=this.ctrl.height||this.ctrl.panel.height||this.ctrl.row&&this.ctrl.row.height;if(v.a.isString(e)&&(e=parseInt(e.replace("px",""),10)),0===this.elem.width()||0===e||void 0===e)return this._renderRetries>this.retryTimes?(console.log("onRender: still unable to determine height, and we ran out of retries"),!1):(this._renderRetries++,console.log("onRender: unable to determine height, retrying again in "+this.retryDelay+"ms"),this.$timeout((function(){t.onRender()}),this.retryDelay),!0);e-=8,e-=this.getLegendHeight(e);var i=y()("<div></div>"),n={margin:"auto",position:"relative",height:e+"px"};this.elem.html(i),i.css(n),"Right side"===this.panel.legendType||this.typeChanged?(setTimeout((function(){return t.renderChart(i)}),0),this.typeChanged=!1):this.renderChart(i),this.ctrl.renderingCompleted()}},{key:"renderChart",value:function(t){if(this.series&&0!==this.series.length){if(t.height()>0&&t.width()>0){var e=this.getOptions();this.setData(),y.a.plot(t,this.seriesData,e)}}else this.noDataPoints()}},{key:"getLabeledValues",value:function(t){var i,n=t[0],o=n&&n.meta?n.meta.metric:void 0;switch(o){case"applications":i=function(t,e){return e[t.indexOf("application")]};break;case"hosts":i=function(t,e){return e[t.indexOf("host")]};break;case"conversations":i=function(t,e){var i=e[t.indexOf("application")];return e[t.indexOf("source")]+" <-> "+e[t.indexOf("dest.")]+" ["+(i||"Unknown")+"]"}}if(!o)return{inByLabel:"unknown",outByLabel:"unknown"};var r=n&&n.meta?n.meta.toBits:null,s=e.extractValueAndLabel(t,r?"Bits In":"Bytes In","In",i),l=e.extractValueAndLabel(t,r?"Bits Out":"Bytes Out","Out",i);if("rate"===this.panel.display){this.units+="/s";var a=x.a.duration(this.range.to.diff(this.range.from)).asSeconds();s=v.a.map(s,(function(t){return{key:t.key,value:t.value/a}})),l=v.a.map(l,(function(t){return{key:t.key,value:t.value/a}}))}return{inByLabel:s,outByLabel:l}}},{key:"getSeries",value:function(t,i){var n=[];switch(this.panel.direction){case"horizontal":for(var o=t.inByLabel.length-1;o>=0;o--)n.push(e.generateResultObject(t.outByLabel,o,i,"#DB4345")),n.push(e.generateResultObject(t.inByLabel,o,i,"#86B15B"));break;case"vertical":for(var r=0;r<t.inByLabel.length;r++)n.push(e.generateResultObject(t.inByLabel,r,i,"#86B15B")),n.push(e.generateResultObject(t.outByLabel,r,i,"#DB4345"))}return n}},{key:"getOptions",value:function(){var t={bars:{show:!0,barWidth:.6,align:"center",fill:.8,lineWidth:1},stack:"stacked"===this.panel.mode},e={mode:"categories",tickLength:0,autoscaleMargin:.02},i=[{axisLabel:this.units}],n={legend:{show:!1},axisLabels:{show:!0},series:t,grid:{borderWidth:0}};switch(this.panel.direction){case"horizontal":n.xaxes=i,t.bars.horizontal=!0,n.yaxis=e;break;case"vertical":n.yaxes=i,t.bars.horizontal=!1,n.xaxis=e}return n}},{key:"getSeriesData",value:function(t,i,n){var o;switch(n){case"separate":o=e.getData(this.series,this.panel.direction);var r={label:"In",bars:{show:!0,barWidth:.2},color:this.getColorForSeriesIndex(0)};this.hiddenSeries[0]||(r.data=o.dataIn);var s={label:"Out",bars:{show:!0,barWidth:.2},color:this.getColorForSeriesIndex(1)};switch(this.hiddenSeries[1]||(s.data=o.dataOut),i){case"horizontal":return r.bars.align="left",s.bars.align="right",[r,s];case"vertical":return r.bars.align="right",s.bars.align="left",[s,r]}break;case"stacked":o=e.getDataStacked(this.series,this.panel.direction);for(var l=[],a=0,c=0,h=Object.keys(o);c<h.length;c++){var u=h[c],p={label:u,color:this.getColorForSeriesIndex(a)};this.hiddenSeries[a++]||(p.data=o[u]),l.push(p)}return l}}},{key:"setData",value:function(){this.seriesData=this.getSeriesData(this.series,this.panel.direction,this.panel.mode),this.legendData=this.getLegendData(this.seriesData,this.panel.direction,this.panel.mode)}},{key:"getLegendData",value:function(t,e,i){var n=this,o=0;if("vertical"===e&&"separate"===i){for(var r=[],s=t.length-1;s>=0;s--){var l=t[s];r.push({label:l.label,color:this.getColorForSeriesIndex(o++)})}return r}return v.a.map(t,(function(t){return{label:t.label,color:n.getColorForSeriesIndex(o++)}}))}},{key:"getColorForSeriesIndex",value:function(t){return this.panel.aliasColors[t]?this.panel.aliasColors[t]:this.$rootScope.colors[t]}},{key:"changeSeriesColor",value:function(t,e){this.panel.aliasColors[t]=e,this.render()}},{key:"toggleSeries",value:function(t){this.hiddenSeries[t]?delete this.hiddenSeries[t]:this.hiddenSeries[t]=!0,this.render()}},{key:"onLegendTypeChanged",value:function(){this.setLegendWidthForLegacyBrowser(),this.typeChanged=!0,this.render()}},{key:"setLegendWidthForLegacyBrowser",value:function(){!!window.MSInputMethodContext&&!!document.documentMode&&"Right side"===this.panel.legendType&&!this.panel.legend.sideWidth&&(this.panel.legend.sideWidth=150)}},{key:"getLegendHeight",value:function(){return this.panel.legend.show&&"Right side"!==this.panel.legendType?"Under graph"===this.panel.legendType?this.panel.legend.bottomHeight:void 0:0}},{key:"noDataPoints",value:function(){this.elem.html('<div class="datapoints-warning"><span class="small">No data points</span></div>')}}],[{key:"getData",value:function(t,e){var i=[],n=[];switch(e){case"horizontal":for(var o=0,r=1;o<t.length-1;o+=2,r+=2)n.push([t[o].count,t[o].name]),i.push([t[r].count,t[r].name]);break;case"vertical":for(var s=0,l=1;s<t.length-1;s+=2,l+=2)i.push([t[s].name,t[s].count]),n.push([t[l].name,t[l].count])}return{dataIn:i,dataOut:n}}},{key:"getDataStacked",value:function(t,e){var i={};switch(e){case"horizontal":for(var n=t.length-2,o=t.length-1;n>=0;n-=2,o-=2)i[t[n].name]=[],i[t[n].name].push([t[n].count,"Out"]),i[t[n].name].push([t[o].count,"In"]);break;case"vertical":for(var r=0,s=1;r<t.length-1;r+=2,s+=2)i[t[r].name]=[],i[t[r].name].push(["In",t[r].count]),i[t[r].name].push(["Out",t[s].count])}return i}},{key:"extractValueAndLabel",value:function(t,e,i,n){var o=[];if(!t||!t[0]||!t[0].columns)return o;var r=t[0].columns.map((function(t){return t.text.toLowerCase()})),s=r.indexOf(e.toLowerCase());return t[0].rows&&t[0].rows.forEach((function(t){o.push({key:n(r,t),value:t[s]})})),o}},{key:"getUnits",value:function(t,e){var i,n=t[0],o=n&&n.meta?n.meta.toBits:null,r=1;switch(e){case"b":i=o?"Bits":"Bytes";break;case"kb":r=1024,i=o?"Kb":"KB";break;case"mb":r=Math.pow(1024,2),i=o?"Mb":"MB";break;case"gb":r=Math.pow(1024,3),i=o?"Gb":"GB"}return{divisor:r,units:i}}},{key:"generateResultObject",value:function(t,e,i,n){return{name:t[e].key,count:v.a.defaultTo(t[e].value,0)/i,color:n}}}]),e}(g.MetricsPanelCtrl);$.templateUrl="panels/flow-histogram/module.html",i.d(e,"PanelCtrl",(function(){return $})),Object(g.loadPluginCss)({dark:"plugins/opennms-helm-app/panels/flow-histogram/css/legend.dark.css",light:"plugins/opennms-helm-app/panels/flow-histogram/css/legend.light.css"})}])}));
//# sourceMappingURL=module.js.map